#!/bin/sh

. ~/.config/faintrc_private

#===============================================================================
#                             Default Settings
#===============================================================================

TRASH_DIR=/mnt/internal/trash
MARGIN_TOP_BOTTOM=0 # 0 - 49
MARGIN_LEFT_RIGHT=0 # 0 - 49
BORDER=bottom       # rounder | sharp | horizontal | vertical | top | bottom | left | right

#===============================================================================
# Bindings ( â‰ has to be a single character!) [ More on fzf man page ]
#===============================================================================

#===============================================================================
#                             Filters
#===============================================================================

FILTERS="\
node_modules+;
env;
__+;
.svelte-kit+;
build+;
dist+;
plugins+;
package-lock.json$;
main.spec$;
requirements.txt$;
pyvenv.cfg$;
config.js$;
config.mjs$;
example_.*$;
.browserslistrc$;
pubspec.lock$;
composer.lock$;
.ex4$;
.dat$;
.env$;
.packages$;
.idea$;
.gitignore$;
.github$;
.nvmrc$;
.log$;
.dart_tool$;
.metadata$;
ios$;
android$;
yarn.lock$;
yarn-error.log$;
.git$;
.cache$;
manifest.json$;
credentials.json$;
.session$;
.session-journal$;
package.json$;
tsconfig.json$;
Makefile$;
docs$;
config.mk$;
LICENSE$;
PKGBUILD$;
.cache$;
.nuxt$;
/config$;
README.md$;
data/$;
Procfile$;
jsconfig.json$;
config.json$;
nuxt.config.js$;
"
# layouts;
# nuxt.config.js;

#===============================================================================
#                             Operations
#===============================================================================

link_soft() {
    echo "$FILE_LIST" \
        | while read -r file; do
            ln -rs "$file" "$LAST_DIR"
            # cp -frs "$file" "$LAST_DIR"
        done
}
link_hard() {
    echo "$FILE_LIST" \
        | while read -r file; do
            cp -frl "$file" "$LAST_DIR"
        done
}
tmux_window() {
    tmux new-window "$EDITOR $FILE_ARGS"
    # tmux swap-window -d -t :-
}
# own() {
#   echo "$FILE_ARGS" \
#     | while read -r file; do
#       doas -n chown -R "$USER" "$file"
#     done
# }
hulk() {
    kill -37 "$FAINT_PID"
    pkill -P "$FAINT_PID"
}
upload() { curl -F"file=@$FILE_ARGS" https://0x0.st | xsel -b; }
push_to_arnie() { adb connect 192.168.0.100 && adb push --sync "$FILE_ARGS" $CARD; }
# push2android() { rsync -aP "$FILE_ARGS" $PHONE:$CARD; }
show_size() { notify-send "$(du -sh "$FILE_ARGS" | cut -f1)"; }
launch_choose() { /usr/local/bin/launch -c "$FILE_ARGS" & }
make_dir() { kill -38 "$FAINT_PID" && pkill -P "$FAINT_PID"; }
rename() {
    echo "$FILE_ARGS" > "$FILE_LIST_PATH"
    kill -39 "$FAINT_PID"
    pkill -P "$FAINT_PID"
}
duplicate() {
    echo "$FILE_ARGS" > "$FILE_LIST_PATH"
    kill -40 "$FAINT_PID"
    pkill -P "$FAINT_PID"
}
compress() {

    CURRENT=$PWD
    LOCATION="${FILE_ARGS%/*}"
    NAME="${FILE_ARGS##*/}"
    cd "$LOCATION" || exit
    # tar cfz compressed.tgz --exclude=./compressed.tgz .
    zip -r "$NAME".zip "$NAME"
    cd "$CURRENT" || exit
}

encrypt() {
    echo "$FILE_ARGS" \
        | while read -r file; do
            # gpg -esr "salmanabedin@disroot.org" "$file" && rm "$file"
            gpg -esr "$GPG_MAIL" "$file" && rm "$file"
        done
}
decrypt() {
    echo "$FILE_ARGS" \
        | while read -r file; do
            gpg -qd "$file" > "${file%.gpg}"
            rm "$file"
        done
}

# rename() {
#   ns "$FILE_ARGS"
# }

OPS="\
ğŸ·  Rename:rename;
ğŸ’• Duplicate:duplicate;
âœ–  Tmux:tmux_window;
ğŸ˜  Hulk:hulk;
ğŸš® Trash:trash;
âŒ Delete:delete;
Â©  Yank:yank;
ğŸ–Œ  Paste:paste;
ğŸšš Move:move;
ğŸ“± Push to Arnie:push_to_arnie;
â° Push to Barry:push_to_barry;
â° Push to GSS:push_to_gss;
â° Push to Silvie:push_to_silvie;
â„¹  Show Size:show_size;
ğŸ’Š Choose:launch_choose;
ğŸ“ New Directory:make_dir;
ğŸ—  Soft Link:link_soft;
ğŸŒ´ Hard Link:link_hard;
ğŸ”’ Encrypt:encrypt;
ğŸ”‘ Decrypt:decrypt;
â™¦  Compress:compress;
â¬†  Upload:upload;
"
# ğŸ˜ Own:own;
# ğŸ’» Push to YY:push2yy;

#===============================================================================
#                               Icons
#===============================================================================

ICONS="\
DIR:ğŸ“;
FILE:ğŸ“ƒ;
LINK:â›“;
iso|img:ğŸ“€;
png|ico:ğŸ–¼;
jpg|jpeg:ğŸ“¸;
part:ğŸ’”;
json:ğŸ“’;
md:ğŸ“˜;
tex:ğŸ“œ;
css|sass|scss:ğŸ¨;
html|pug:ğŸ“;
url:ğŸŒ;
pdf|epub:ğŸ“š;
mp4|mkv:ğŸ¥;
ts|js:ğŸ®;
"

execute() {
    /usr/local/bin/launch -f "$*"
}
